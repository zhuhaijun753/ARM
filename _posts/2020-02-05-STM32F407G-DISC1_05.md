---
layout: post
title:  "[STM32F407G-DISC1] 5. MCU Bus Interface"
date:   2020-02-05
categories: ARM ST
---

이 포스팅은 `STM32F407G-DISC1을 활용한` 포스팅임을 알려드립니다.

---
### MCU Bus Interface (STM32F407X)

ARM Cortex Bus의 종류는 크게 3가지로 분류된다
1. D-BUS : Data
2. I-BUS : Instruction
3. S-BUS : System

![01](https://drive.google.com/open?id=1_nGgOzZdvL48oGSBuW7wqf5KFx3a0qpp)

그리고 각 인터페이스는 Flash의 정해진 메모리 영역 안에서만 동작한다. [ARM M4 Technical Manual](https://static.docs.arm.com/100166/0001/arm_cortexm4_processor_trm_100166_0001_00_en.pdf)을 참고하도록 한다

![02](https://drive.google.com/open?id=1YGXzYtOmcNLra_PzAkijPtUTFqJA6Kym)

1. Instruction fetches from Code memory space, 0x00000000 to 0x1FFFFFFC, are performed over the 32-bit AHB-Lite bus.

2. Data and debug accesses to Code memory space, 0x00000000 to 0x1FFFFFFF, are performed over the 32-bit AHB-Lite bus.

3. But Outside, Instruction fetches and data and debug accesses to address ranges 0x20000000 to 0xDFFFFFFF and 0xE0100000 to 0xFFFFFFFF are performed over the 32-bit AHB-Lite bus.

Flash Memory는 메모리 맵상 0x0800_0000이 base addr이다. 따라서 Instruction은 0x0000_0000 ~ 0x1FFF_FFFC에 존재하므로 I-BUS를 읽을 것이다. 그리고 Read-Only Data 또한 0x0000_0000 ~ 0x1FFF_FFFF에 존재하므로 D-BUS로 읽을 것이다.

하지만 SRAM 혹은 Peripheral 영역은 메모리 맵 상으로 0x2000_0000 이상이므로 S-BUS 인터페이스로 읽어진다. 따라서 이는 AHB, APB로 버스 속도 기준으로 나눠지게 된다

![03](https://drive.google.com/open?id=1wS8aCY5TgiGzQ_hXc6xRj2xVcd54zZ4r)
