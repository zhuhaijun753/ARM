---
layout: post
title:  "[STM32F407G-DISC1] 13. GPIO Register"
date:   2020-02-13
categories: ARM ST
---

이 포스팅은 `STM32F407G-DISC1을 활용한` 포스팅임을 알려드립니다.

---
### GPIO Structure

다양한 vendor의 GPIO는 대부분 다음과 같이 구성되어 있다. 가장 기본적으로 Mode Register라는 direction을 정하는 register가 있다. 
이를 통해 input, output, analog, alternate 중 하나를 선택할 수 있다

![01](https://drive.google.com/uc?id=1ADYhe2NyB6VcNqAkgJakeX1Pr1WgTYoP)

ST Micom에서는 많은 configuration register로 구성되어 있다

* GPIO Port Mode register (GPIOx_MODER).
* GPIO Output Type register (GPIOx_OTYPER)
* GPIO Output Speed register (GPIOx_OSPEEDR) 
* GPIO Pull Up /Pull Down  register (GPIOx_PUPDR)
* GPIO Input Data register (GPIOx_IDR)
* GPIO Output Data register (GPIOx_ODR)
* GPIO Bit Set / Reset register (GPIOx_BSRR)
* GPIO Lock register (GPIOx_LCKR)
* GPIO Alternate Function register (GPIOx_AFRHand GPIOx_AFRL)

![02](https://drive.google.com/uc?id=1pGWxtGurW_dCzqQqtsXLcEt1rjUW0fee)

그리고 ST GPIO들은 AHB1 버스에 연결되어 있어, 168MHz라는 높은 clock까지 지원이 된다 

---
### ST Discovery GPIO Pin

__STM32F407VG 핀은 GPIO A-I까지 총 9개의 GPIO 포트를 지원하고 있다. 각각 16개의 Pin을 가지고 있어, 총 144개의 Pin을 가지고 있다. 
하지만 development 보드는 한계가 있기 때문에 총 5개의 포트인 GPIO A-E까지 지원이 되어서 총 80개의 핀만 사용할 수 있다.__ 

---
### ST GPIO Register

먼저 mode(direction) register부터 살펴보면 다음과 같다. 주의 깊게 볼 것은 A, B포트의 Reset value는 0x0000_0000가 아니라는 점이다. 

![03](https://drive.google.com/uc?id=1RjANHOcYgsfzFrlEtcZ-ubrvGH-lw5SN)

그리고 기본적으로는 input 모드를 띄게 되며, analog 모드는 주로 ADC, DAC 때 사용되게 된다
