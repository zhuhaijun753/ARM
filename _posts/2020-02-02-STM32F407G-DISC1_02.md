---
layout: post
title:  "[STM32F407G-DISC1] 2. SWD, OpenOCD를 활용한 HelloWorld"
date:   2020-02-02
categories: ARM ST
---

이 포스팅은 `STM32F407G-DISC1을 활용한` 포스팅임을 알려드립니다.

---
### 프로젝트 생성

프로젝트 생성에 앞서 이 포스팅은 `STM32CubeMX` GUI를 활용한 코딩을 하지 않고, 나름의
bare metal 프로그래밍으로 진행된다.

1. STM32CubelDE를 열고 STM Project를 생성한다

    ![st01](https://drive.google.com/uc?id=1J6w3ofjmqGbTHVimAvZFDe9nUlIkvGkm)

2. Target Board로 Board Selector를 선택해 `STM32F4DISCOVERY` 보드를 선택한다. 또한 이 페이지에서는 앞서 말한 Document를 다운로드 할 수 있다

    ![st02](https://drive.google.com/uc?id=1mtT0HP-RmEaiE1Gu1JKrRqe-GLZZ_pNK)

3. 프로젝트 파일을 담을 폴더를 생성해서 그 폴더까지 포함해서 경로를 설정한다. 그리고 위에서 언급했듯이 GUI 코딩은 하지 않을 것이기 때문에 Empty Project Type을 선택한다

    ![st03](https://drive.google.com/uc?id=1TSgy3gSrSWeAU4wcvt8vBlV9TGFts1eL)

4. 프로젝트를 생성한 이후 Build를 한다

    ![st04](https://drive.google.com/uc?id=1qcciZ4l3JodjmaU5UybMYrt-O5x6nJr_)

5. 다음과 같은 Warning이 나타날 것이다. "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use.". 이 프로젝트에서는 FPU 또한 사용하지 않을 것이기 때문에, 프로젝트 속성에서 MCU Setting으로 들어가 FPU 속성을 끄도록 한다. 그리고 다시 재빌드를 하면 Warning이 사라지는 것을 볼 수 있다

    ![st05](https://drive.google.com/uc?id=1lcNOcLjBvdKkb8eOKMmbg5YlQ85lb2pz)

---
### Embedded에서의 HelloWorld

PC에는 모니터가 있기 때문에 프로그램 출력을 콘솔로 띄우는 일은 IDE를 사용하면 쉽게 동작시킬 수 있다. 그러나 Embedded 장비는 환경이 제한적이라 콘솔이라는 개념이 쉽게 잡혀지지 않는다. 즉 표시 장치인 LCD와 같은 디스플레이 장비를 연결해야만 MCU가 전송한 내용을 확인할 수 있다.

하지만 __M3 계열의 이상을 가진 ARM 프로세서에서 제공되는 SWD 인터페이스를 활용해 SWV를 이용할 수 있다. 즉, SWV를 이용하면 디버깅 용도의 Usb-to-Uart 장비를 사용을 생략할 수 있다. SWO 핀을 사용하는데, 이는 Serial Wire Output을 의미한다.__
