---
layout: post
title:  "[STM32F407G-DISC1] 8. HSI, HSE Clock 측정"
date:   2020-02-07
categories: ARM ST
---

이 포스팅은 `STM32F407G-DISC1을 활용한` 포스팅임을 알려드립니다.

---
### MCO

MCU의 Clock으로 동작하는 HSI와 HSE의 Clock을 측정해보려고 한다. STM32F407G에는 MCO(MCU Clock Output)이 존재한다. 이는 하나의 MCU 핀으로 출력이 된다. CubeIDE에서 2개의 MCO를 확인할 수 있다. MCO1에서 HSI, HSE Signal을 확인할 수 있다


![01](https://drive.google.com/uc?id=1iwALpAl1Xs4kEjm1GfJsLrx1VSYbfPov)


그리고 CubeIDE에서 RCC 탭에서 Master Clock Output 1을 Set함으로써 이를 활성화시킬 수 있다. 현재 보드 상으로는 PA8이 출력 핀이 된다.


![02](https://drive.google.com/uc?id=1uajzovatMwGKbAYqCJXWv6sgvmZlPZqm)


---
### Bare Metal Coding

1. CubeMX를 사용하지 않고, 직접 레지스터를 통해 확인해보려고 한다. RM 문서에서 RCC 탭으로 가면 Configuration Register에서 확인할 수 있다


    ![03](https://drive.google.com/uc?id=1pVI0bKBp5BCYouPLOPl1cpjPFUYCAXAf)


    ![04](https://drive.google.com/uc?id=12vDb2-svwPnO31N5FfnHRPe40-mLB5md)


2. 그리고 Chip DataSheet에서 MCO1에 대한 Alternate Pin이 PA8임을 확인할 수 있다


    ![05](https://drive.google.com/uc?id=17dAyC969ayXIOGYgXrSS3T1DBUDPNMVr)


3. 코드를 구현하려고 한다. 코드를 작성하는 순서는 다음과 같을 것이다

    1. RCC MCO1 설정
    2. MCO1에 대한 Prescaler 값 설정
    3. GPIOA RCC Clock Enable
    4. PA8번에 대해서 Alternate 설정
