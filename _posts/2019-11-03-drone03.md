---
layout: post
title:  "3. STM32CubelDE 디버깅 환경 구성"
date:   2019-11-01
categories: STM32F4 드론
---

__이 포스팅은 [드론개발강좌](https://www.inflearn.com/course/STM32CubelDE-STM32F4%EB%93%9C%EB%A1%A0-%EA%B0%9C%EB%B0%9C#)를 기반으로 하고 있음을 알려드립니다.__

__추가적으로 이 포스팅은 [STM32F4 무료강좌](https://www.inflearn.com/course/stm32f4/dashboard) 또한 기반으로 하고 있음을 알려드립니다.__

---

임베디드 시스템 개발을 하는데 있어 한 번에 코드를 완성하고 그 코드가 정상적으로 동작을 완료한다면 디버깅이라는 것은 생기지 않는다. 하지만 문법, 아키텍처 오류 등 다양한 버그가 발생할 수 있다. 따라서 디버깅은 중요하고, 호스트 PC에서 콘솔이라는지 외부 IO를 이용해서 디버깅을 하게 된다. 따라서 부저와 UART를 통해서 디버깅을 알아보고자 한다.

1. 부저
  부저는 소리를 내는 장치다. 다양한 소리를 내기 위해서는 주파수를 다르게 하면 되고, 주파수는 시간과 관계가 있다. 따라서 시간을 내기 위해서 타이머를 사용해야만 한다.
  1. 타이머 인터럽트
    - 디지털 시스템에서는 시간을 클럭으로 측정하게 된다. 또한 MCU에 따라 8비트, 16비트, 32비트 타이머를 다양하게 사용하고 있다. 이는 측정할 수 있는 최대 카운팅 횟수가 다르기 때문에 prescaler를 효과적으로 사용해야 한다

  2. 레지스터
    - TCNT : 카운팅 값 레지스터
    - ARR : Auto Reload 레지스터, TCNT가 목표하는 값을 가지게 된다

  3. 버스
    - 32비트 ST MCU는 타이머마다 사용하는 클럭 버스가 다르다. 어떤 것은 CLK/2를, 다른 타이머는 CLK를 사용하기 때문에 반드시 어떤 버스에 연결되었지 확인해서 정확한 시스템 클럭을 확인하도록 한다

    ![클럭](https://drive.google.com/uc?id=1bcwcnSZF3ingwx-2S9CCTE5ZgPan5zTB)

    4. 구현
2.
